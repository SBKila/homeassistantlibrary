#pragma once
#include <pgmspace.h>

namespace HALIB_NAMESPACE
{
    // -------------------------------------------------------------------------
    // 1. Déclarations des chaînes PROGMEM (Templates et valeurs textuelles)
    // -------------------------------------------------------------------------
    extern const char PROPERTY_TEMPLATE_STRING[] PROGMEM;
    extern const char PROPERTY_TEMPLATE_OBJECT[] PROGMEM;

    extern const char PROP_VALUE_ROOT_TOPIC[] PROGMEM;
    extern const char PROP_VALUE_ACTION_TOPIC[] PROGMEM;
    // ... (toutes les autres constantes chaînes sont gérées par le .cpp,
    // on n'a pas besoin de toutes les déclarer extern sauf si utilisées ailleurs explicitement)

    // Note : Pour simplifier et éviter de lister les centaines de 'extern const char...',
    // le plus important ici sont les TABLEAUX ci-dessous qui causent l'erreur.

    // -------------------------------------------------------------------------
    // 2. Définition de l'Enum (Doit rester dans le .hpp)
    // -------------------------------------------------------------------------
    enum HAComponentPropertyKey
    {
        PROP_ROOT_TOPIC,
        PROP_ACTION_TOPIC,
        PROP_ACTION_TEMPLATE,
        PROP_AUTOMATION_TYPE,
        PROP_AUX_COMMAND_TOPIC,
        PROP_AUX_STATE_TEMPLATE,
        PROP_AUX_STATE_TOPIC,
        PROP_AVAILABILITY_TOPIC,
        PROP_AWAY_MODE_COMMAND_TOPIC,
        PROP_AWAY_MODE_STATE_TEMPLATE,
        PROP_AWAY_MODE_STATE_TOPIC,
        PROP_BLUE_TEMPLATE,
        PROP_BRIGHTNESS_COMMAND_TOPIC,
        PROP_BRIGHTNESS_SCALE,
        PROP_BRIGHTNESS_STATE_TOPIC,
        PROP_BRIGHTNESS_TEMPLATE,
        PROP_BRIGHTNESS_VALUE_TEMPLATE,
        PROP_COLOR_TEMP_COMMAND_TEMPLATE,
        PROP_BATTERY_LEVEL_TOPIC,
        PROP_BATTERY_LEVEL_TEMPLATE,
        PROP_CHARGING_TOPIC,
        PROP_CHARGING_TEMPLATE,
        PROP_COLOR_TEMP_COMMAND_TOPIC,
        PROP_COLOR_TEMP_STATE_TOPIC,
        PROP_COLOR_TEMP_TEMPLATE,
        PROP_COLOR_TEMP_VALUE_TEMPLATE,
        PROP_CLEANING_TOPIC,
        PROP_CLEANING_TEMPLATE,
        PROP_COMMAND_OFF_TEMPLATE,
        PROP_COMMAND_ON_TEMPLATE,
        PROP_COMMAND_TOPIC,
        PROP_COMMAND_TEMPLATE,
        PROP_CODE_ARM_REQUIRED,
        PROP_CODE_DISARM_REQUIRED,
        PROP_CURRENT_TEMPERATURE_TOPIC,
        PROP_CURRENT_TEMPERATURE_TEMPLATE,
        PROP_DEVICE,
        PROP_DEVICE_CONNECTION,
        PROP_DEVICE_IDENTIFIER,
        PROP_DEVICE_MANUFACTURER,
        PROP_DEVICE_MODEL,
        PROP_DEVICE_RELEASE,
        PROP_DEVICE_CLASS,
        PROP_DOCKED_TOPIC,
        PROP_DOCKED_TEMPLATE,
        PROP_ERROR_TOPIC,
        PROP_ERROR_TEMPLATE,
        PROP_FAN_SPEED_TOPIC,
        PROP_FAN_SPEED_TEMPLATE,
        PROP_FAN_SPEED_LIST,
        PROP_FLASH_TIME_LONG,
        PROP_FLASH_TIME_SHORT,
        PROP_EFFECT_COMMAND_TOPIC,
        PROP_EFFECT_LIST,
        PROP_EFFECT_STATE_TOPIC,
        PROP_EFFECT_TEMPLATE,
        PROP_EFFECT_VALUE_TEMPLATE,
        PROP_EXPIRE_AFTER,
        PROP_FAN_MODE_COMMAND_TOPIC,
        PROP_FAN_MODE_STATE_TEMPLATE,
        PROP_FAN_MODE_STATE_TOPIC,
        PROP_FORCE_UPDATE,
        PROP_GREEN_TEMPLATE,
        PROP_HOLD_COMMAND_TOPIC,
        PROP_HOLD_STATE_TEMPLATE,
        PROP_HOLD_STATE_TOPIC,
        PROP_HS_COMMAND_TOPIC,
        PROP_HS_STATE_TOPIC,
        PROP_HS_VALUE_TEMPLATE,
        PROP_ICON,
        PROP_INITIAL,
        PROP_JSON_ATTRIBUTES,
        PROP_JSON_ATTRIBUTES_TOPIC,
        PROP_JSON_ATTRIBUTES_TEMPLATE,
        PROP_MAX_TEMP,
        PROP_MIN_TEMP,
        PROP_MODE_COMMAND_TOPIC,
        PROP_MODE_STATE_TEMPLATE,
        PROP_MODE_STATE_TOPIC,
        PROP_NAME,
        PROP_OFF_DELAY,
        PROP_ON_COMMAND_TYPE,
        PROP_OPTIMISTIC,
        PROP_OSCILLATION_COMMAND_TOPIC,
        PROP_OSCILLATION_STATE_TOPIC,
        PROP_OSCILLATION_VALUE_TEMPLATE,
        PROP_PAYLOAD,
        PROP_PAYLOAD_ARM_AWAY,
        PROP_PAYLOAD_ARM_HOME,
        PROP_PAYLOAD_ARM_NIGHT,
        PROP_PAYLOAD_AVAILABLE,
        PROP_PAYLOAD_CLEAN_SPOT,
        PROP_PAYLOAD_CLOSE,
        PROP_PAYLOAD_DISARM,
        PROP_PAYLOAD_HIGH_SPEED,
        PROP_PAYLOAD_HOME,
        PROP_PAYLOAD_LOCK,
        PROP_PAYLOAD_LOCATE,
        PROP_PAYLOAD_LOW_SPEED,
        PROP_PAYLOAD_MEDIUM_SPEED,
        PROP_PAYLOAD_NOT_AVAILABLE,
        PROP_PAYLOAD_NOT_HOME,
        PROP_PAYLOAD_OFF,
        PROP_PAYLOAD_OFF_SPEED,
        PROP_PAYLOAD_ON,
        PROP_PAYLOAD_OPEN,
        PROP_PAYLOAD_OSCILLATION_OFF,
        PROP_PAYLOAD_OSCILLATION_ON,
        PROP_PAYLOAD_PAUSE,
        PROP_PAYLOAD_STOP,
        PROP_PAYLOAD_START,
        PROP_PAYLOAD_START_PAUSE,
        PROP_PAYLOAD_RETURN_TO_BASE,
        PROP_PAYLOAD_TURN_OFF,
        PROP_PAYLOAD_TURN_ON,
        PROP_PAYLOAD_UNLOCK,
        PROP_POSITION_CLOSED,
        PROP_POSITION_OPEN,
        PROP_POWER_COMMAND_TOPIC,
        PROP_POWER_STATE_TOPIC,
        PROP_POWER_STATE_TEMPLATE,
        PROP_RED_TEMPLATE,
        PROP_RETAIN,
        PROP_RGB_COMMAND_TEMPLATE,
        PROP_RGB_COMMAND_TOPIC,
        PROP_RGB_STATE_TOPIC,
        PROP_RGB_VALUE_TEMPLATE,
        PROP_SEND_COMMAND_TOPIC,
        PROP_SEND_IF_OFF,
        PROP_SET_FAN_SPEED_TOPIC,
        PROP_SET_POSITION_TEMPLATE,
        PROP_SET_POSITION_TOPIC,
        PROP_POSITION_TOPIC,
        PROP_SPEED_COMMAND_TOPIC,
        PROP_SPEED_STATE_TOPIC,
        PROP_SPEED_VALUE_TEMPLATE,
        PROP_SPEEDS,
        PROP_SOURCE_TYPE,
        PROP_STATE_CLOSED,
        PROP_STATE_CLOSING,
        PROP_STATE_OFF,
        PROP_STATE_ON,
        PROP_STATE_OPEN,
        PROP_STATE_OPENING,
        PROP_STATE_LOCKED,
        PROP_STATE_UNLOCKED,
        PROP_STATE_TOPIC,
        PROP_STATE_TEMPLATE,
        PROP_STATE_VALUE_TEMPLATE,
        PROP_SUBTYPE,
        PROP_SUPPORTED_FEATURES,
        PROP_SWING_MODE_COMMAND_TOPIC,
        PROP_SWING_MODE_STATE_TEMPLATE,
        PROP_SWING_MODE_STATE_TOPIC,
        PROP_TEMPERATURE_COMMAND_TOPIC,
        PROP_TEMPERATURE_HIGH_COMMAND_TOPIC,
        PROP_TEMPERATURE_HIGH_STATE_TEMPLATE,
        PROP_TEMPERATURE_HIGH_STATE_TOPIC,
        PROP_TEMPERATURE_LOW_COMMAND_TOPIC,
        PROP_TEMPERATURE_LOW_STATE_TEMPLATE,
        PROP_TEMPERATURE_LOW_STATE_TOPIC,
        PROP_TEMPERATURE_STATE_TEMPLATE,
        PROP_TEMPERATURE_STATE_TOPIC,
        PROP_TILT_CLOSED_VALUE,
        PROP_TILT_COMMAND_TOPIC,
        PROP_TILT_INVERT_STATE,
        PROP_TILT_MAX,
        PROP_TILT_MIN,
        PROP_TILT_OPENED_VALUE,
        PROP_TILT_OPTIMISTIC,
        PROP_TILT_STATUS_TOPIC,
        PROP_TILT_STATUS_TEMPLATE,
        PROP_TOPIC_TOPIC,
        PROP_UNIQUE_ID,
        PROP_UNIT_OF_MEASUREMENT,
        PROP_VALUE_TEMPLATE,
        PROP_WHITE_VALUE_COMMAND_TOPIC,
        PROP_WHITE_VALUE_SCALE,
        PROP_WHITE_VALUE_STATE_TOPIC,
        PROP_WHITE_VALUE_TEMPLATE,
        PROP_XY_COMMAND_TOPIC,
        PROP_XY_STATE_TOPIC,
        PROP_XY_VALUE_TEMPLATE,
        PROP_TYPE,
        PROP_STYPE,
        PROP_STATE_CLASS
    };

    // -------------------------------------------------------------------------
    // 3. Déclaration externe des tableaux principaux (C'est ce qui manque au Linker)
    // -------------------------------------------------------------------------
    extern PGM_P DiscoveryMessageKeyLabel[] PROGMEM;
    extern PGM_P PropertyDefaultValue[] PROGMEM;

} // namespace HALIB_NAMESPACE